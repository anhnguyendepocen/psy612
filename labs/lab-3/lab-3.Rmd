---
title: "Lab 3: Univariate Regression (cont.) & GLM"
output: 
  html_document: 
    fig_caption: yes
    theme: cosmo
    toc: yes
    toc_depth: 3
    toc_float: TRUE
---

# Purpose

INTRO 

To quickly navigate to the desired section, click one of the following links:

1. [Uncertainty in regression](#uncertainty)

You will need to load the following libraries to follow along with today's lab. If you don't have any of these packages installed, please do so now. 

```{r message=FALSE}
library(tidyverse) # for plotting and data wrangling
library(rio) # for importing data
library(psych) # for stats functions
library(broom) # for cleaning up output
```

***

# Uncertainty in regression{#uncertainty}


## Data and review

```{r}
health <- import("https://raw.githubusercontent.com/uopsych/psy612/master/labs/lab-3/data/consc_health.csv")
```
<br>

* Here's how we wrote out our model

$$Y_i = \beta_0 + \beta_1X_i + \epsilon_i$$

$$health_i = \beta_0 + \beta_1consc_i + \epsilon_i$$
<br>

* Here's how we specified the model in R

```{r}
model <- lm(sr_health ~ consc, data = health)
```
<br>

* Here are our cofficients 

```{r echo=FALSE}
tidy(model) %>% #
  rename(coefficient = term,
        b = estimate,
        SE = std.error,
        t = statistic,
        p = p.value) %>%
  mutate(p = ifelse(p > .001, round(p, 3), "< .001")) %>% 
  knitr::kable(digits = c(NA, 2, 2, 2, 3), 
               caption = "Results of Regressing Self-Reported Health on Conscientiousness") 
```

## Confidence intervals

```{r }
confint(model)
```


```{r echo=FALSE}
health %>%
  ggplot(aes(x = consc, y = sr_health)) + 
  geom_point(size = 0.5, color = "darkgrey", alpha = 0.7) + 
  geom_smooth(method = "lm") +
  geom_abline(aes(intercept = confint(model)[1,1], slope = confint(model)[2,2])) +
  geom_abline(aes(intercept = confint(model)[1,2], slope = confint(model)[2,1])) +
  scale_x_continuous("Conscientiousness") +
  scale_y_continuous("Self-rated health") +
  theme_minimal()
```


## Confidence bands

### Demo

## Prediction bands

** 

# Regression with matrix algebra

***

# The General Linear Model

***



***

# Minihacks

## Minihack 1

***

## Minihack 2

***

## Minihack 3

***
